# The Dark Mode - 要件と機能

## システム要件
- Google Chrome ブラウザでの動作
- OS（Windows, macOS, Linux）に依存しないこと
- 最小限の権限（アクティブタブの内容の読み取り/変更、設定保存のためのストレージアクセス）のみ要求

## 機能説明

### コア機能
1. **ダークモードの有効/無効化**
   - Chromeツールバーのアイコンクリックで表示されるポップアップUIにメインスイッチを配置
   - スイッチでダークモードの有効/無効を切り替え
   - 設定状態はブラウザ終了後も永続化

2. **テーマ選択機能**
   - 3種類の異なるダークテーマを用意
   - ポップアップUI内でテーマを選択可能
   - 各テーマにはプレビュー（背景色と文字色の見本）を表示
   - 選択されたテーマは保存され、次回以降も維持

3. **ダークモードの適用方法**
   - 拡張機能が「有効」の場合、現在アクティブなタブのウェブページにCSSを適用
   - CSSは !important ルールを使用し、サイト固有のスタイルより優先
   - 選択されたテーマに基づいてスタイルを適用

4. **対象範囲**
   - HTTP または HTTPS プロトコルのHTMLウェブページに適用
   - PDFファイル（PDFビューア）- 将来的な拡張として検討

### ユーザーインターフェース (UI)

1. **ツールバーアイコン**
   - Chromeツールバーに専用アイコンを表示
   - ダークモードを象徴するシンプルなデザイン

2. **ポップアップUI (popup.html)**
   - アイコンクリックで表示
   - 拡張機能のオン/オフを切り替えるメインスイッチ
   - 3つのテーマオプションと各テーマの見本
   - シンプルで直感的なデザイン

## ビジネスルール
- 拡張機能はユーザーデータや閲覧履歴を外部に送信しない
- ユーザーが選択したテーマとオン/オフ状態のみをローカルに保存
- ウェブページのコンテンツは変更せず、表示スタイルのみを変更

## エッジケース
- ダークモードをサポートするWebサイトでも強制的にテーマを適用する
- 画像やメディアコンテンツは変更しない
- 一部のウェブサイトでは、スタイル適用が完全に機能しない可能性がある 