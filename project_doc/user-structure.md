# The Dark Mode - ユーザーフローとプロジェクト構造

## ユーザージャーニー

### 初回使用時
1. ユーザーがChromeウェブストアから「The Dark Mode」拡張機能をインストール
2. インストール完了後、Chromeツールバーに拡張機能のアイコンが表示される
3. ユーザーがアイコンをクリックしてポップアップUIを表示
4. デフォルトでは拡張機能は無効状態、デフォルトテーマ（テーマ1）が選択済み
5. ユーザーがメインスイッチをオンにすると現在のタブにダークモードが適用される

### 日常的な使用
1. ユーザーがウェブサイトを閲覧中
2. 明るい背景のサイトを閲覧する際、拡張機能アイコンをクリック
3. ポップアップUIが表示され、メインスイッチをオンに切り替え
4. 現在のページにダークモードが適用される
5. 必要に応じて、ポップアップ内の別のテーマを選択
6. 選択したテーマがリアルタイムで適用される
7. ブラウザを閉じても設定は保持され、次回も同じ設定が適用される

### 拡張機能の無効化
1. ユーザーが通常モード（明るい表示）に戻したい場合
2. 拡張機能アイコンをクリックしてポップアップUIを表示
3. メインスイッチをオフに切り替え
4. 現在のページから暗いスタイルが解除され、通常の表示に戻る

## データフロー
```
[ユーザー操作] → [ポップアップUI] → [設定保存] → [スタイル適用]
     ↑                                    │
     └────────────────────────────────────┘
           (設定の読み込みと状態反映)
```

## プロジェクトファイル構造の詳細

### `manifest.json`
拡張機能の構成ファイル。バージョン、権限、アイコン、バックグラウンドスクリプトなどを定義します。

### `popup.html`
- ポップアップUIの構造
  - メインスイッチ（トグルボタン）
  - テーマ選択肢（ラジオボタン）
  - テーマプレビュー表示

### `popup.css`
- ポップアップUIのスタイル定義
  - コンパクトで読みやすいレイアウト
  - スイッチとラジオボタンのスタイル
  - テーマプレビューのデザイン

### `popup.js`
- ポップアップUI内の操作に対する処理
  - スイッチのオン/オフイベント処理
  - テーマ選択イベント処理
  - 設定の保存と読み込み

### `background.js`
- ブラウザイベントの監視
  - タブ切り替え時の処理
  - ページロード完了時の処理
  - 拡張機能インストール/更新時の初期化

### `content.js`
- ウェブページへのスタイル適用ロジック
  - 選択されたテーマCSSの挿入
  - CSSの適用と解除

### `themes/`ディレクトリ
- 各テーマのCSSファイル
  - 背景色、文字色、リンク色などのカスタマイズ
  - サイト固有のスタイルを上書きするための!important規則 